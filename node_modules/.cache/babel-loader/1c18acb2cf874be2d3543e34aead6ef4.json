{"ast":null,"code":"var _jsxFileName = \"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Profile.js\";\nimport React, { Fragment } from \"react\";\nimport API from '../../Api/userAPI';\nimport { Redirect } from 'react-router-dom';\nimport Profile_component from './Profile/Profile';\nimport { Card, Container, Row, Col } from \"reactstrap\";\nimport Button from '@material-ui/core/Button'; // import './Profile.css'\n\nimport UpdateProfileForm from './updateProfile';\nconst headers = {\n  'Authorization': `Bearer ${localStorage.getItem('token')}`\n};\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: [],\n      redirect: false\n    };\n\n    this.handleDelete = () => {\n      API.deleteAccount(headers).then(() => {\n        console.log(\"Account was deleted\");\n        localStorage.clear();\n        this.setState({\n          redirect: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    // document.documentElement.scrollTop = 0;\n    // document.scrollingElement.scrollTop = 0;\n    // this.refs.main.scrollTop = 0;\n    API.getProfile(headers).then(user => {\n      this.setState({\n        user: user.data\n      });\n      console.log(this.state.user.name);\n      console.log(this.state.user.lastname);\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const {\n      user,\n      redirect\n    } = this.state;\n\n    if (!localStorage.getItem('token')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 16\n        }\n      });\n    }\n\n    if (redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 16\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(Profile_component, {\n      profilePicture: user.profilePicture,\n      lastname: user.lastname,\n      firstname: user.firstname,\n      email: user.email,\n      biography: user.biography,\n      component: /*#__PURE__*/React.createElement(UpdateProfileForm, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 20\n        }\n      }),\n      handleDelete: this.handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Profile.js"],"names":["React","Fragment","API","Redirect","Profile_component","Card","Container","Row","Col","Button","UpdateProfileForm","headers","localStorage","getItem","Profile","Component","state","user","redirect","handleDelete","deleteAccount","then","console","log","clear","setState","catch","err","componentDidMount","getProfile","data","name","lastname","render","profilePicture","firstname","email","biography"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,iBAAP,MAA8B,mBAA9B;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,GAA1B,EAA+BC,GAA/B,QAA0C,YAA1C;AACA,OAAOC,MAAP,MAAmB,0BAAnB,C,CACA;;AAEA,OAAOC,iBAAP,MAA8B,iBAA9B;AAEA,MAAMC,OAAO,GAAG;AACZ,mBAAkB,UAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAD7C,CAAhB;;AAIA,MAAMC,OAAN,SAAsBd,KAAK,CAACe,SAA5B,CAAsC;AAAA;AAAA;AAAA,SAElCC,KAFkC,GAE1B;AACJC,MAAAA,IAAI,EAAE,EADF;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAF0B;;AAAA,SAuBpCC,YAvBoC,GAuBrB,MAAM;AACnBjB,MAAAA,GAAG,CAACkB,aAAJ,CAAkBT,OAAlB,EACCU,IADD,CACM,MAAM;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAX,QAAAA,YAAY,CAACY,KAAb;AACA,aAAKC,QAAL,CAAc;AAACP,UAAAA,QAAQ,EAAE;AAAX,SAAd;AACH,OALD,EAMCQ,KAND,CAMOC,GAAG,IAAI;AACVL,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACH,OARD;AASH,KAjCqC;AAAA;;AAOpCC,EAAAA,iBAAiB,GAAG;AAClB;AACA;AACA;AAEA1B,IAAAA,GAAG,CAAC2B,UAAJ,CAAelB,OAAf,EACCU,IADD,CACMJ,IAAI,IAAI;AACV,WAAKQ,QAAL,CAAc;AACVR,QAAAA,IAAI,EAAEA,IAAI,CAACa;AADD,OAAd;AAGAR,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKP,KAAL,CAAWC,IAAX,CAAgBc,IAA5B;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKP,KAAL,CAAWC,IAAX,CAAgBe,QAA5B;AACH,KAPD,EAQCN,KARD,CAQOC,GAAG,IAAIL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CARd;AASD;;AAcDM,EAAAA,MAAM,GAAG;AAEP,UAAM;AAAChB,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAmB,KAAKF,KAA9B;;AAEA,QAAG,CAACJ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAkC;AAC9B,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAED,QAAGK,QAAH,EAAY;AACR,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAED,wBACE,oBAAC,iBAAD;AACE,MAAA,cAAc,EAAED,IAAI,CAACiB,cADvB;AAEE,MAAA,QAAQ,EAAEjB,IAAI,CAACe,QAFjB;AAGE,MAAA,SAAS,EAAEf,IAAI,CAACkB,SAHlB;AAIE,MAAA,KAAK,EAAElB,IAAI,CAACmB,KAJd;AAKE,MAAA,SAAS,EAAEnB,IAAI,CAACoB,SALlB;AAME,MAAA,SAAS,eAAE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANb;AAOE,MAAA,YAAY,EAAE,KAAKlB,YAPrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAWD;;AA1DmC;;AA6DtC,eAAeL,OAAf","sourcesContent":["import React, {Fragment} from \"react\";\nimport API from '../../Api/userAPI'\nimport { Redirect } from 'react-router-dom'\nimport Profile_component from './Profile/Profile'\nimport { Card, Container, Row, Col } from \"reactstrap\";\nimport Button from '@material-ui/core/Button';\n// import './Profile.css'\n\nimport UpdateProfileForm from './updateProfile'\n\nconst headers = {\n    'Authorization': `Bearer ${localStorage.getItem('token')}`\n};\n\nclass Profile extends React.Component {\n\n    state = {\n        user: [],\n        redirect: false\n    }\n\n  componentDidMount() {\n    // document.documentElement.scrollTop = 0;\n    // document.scrollingElement.scrollTop = 0;\n    // this.refs.main.scrollTop = 0;\n    \n    API.getProfile(headers)\n    .then(user => {\n        this.setState({\n            user: user.data\n        })\n        console.log(this.state.user.name)\n        console.log(this.state.user.lastname)\n    })\n    .catch(err => console.log(err))\n  }\n\n  handleDelete = () => {\n    API.deleteAccount(headers)\n    .then(() => {\n        console.log(\"Account was deleted\")\n        localStorage.clear()\n        this.setState({redirect: true})\n    })\n    .catch(err => {\n        console.log(err)\n    })\n}\n\n  render() {\n\n    const {user, redirect} = this.state\n\n    if(!localStorage.getItem('token')){\n        return <Redirect to='/' />\n    }\n\n    if(redirect){\n        return <Redirect to='/' />\n    }\n\n    return ( \n      <Profile_component\n        profilePicture={user.profilePicture}\n        lastname={user.lastname} \n        firstname={user.firstname}\n        email={user.email}\n        biography={user.biography}\n        component={<UpdateProfileForm />}\n        handleDelete={this.handleDelete}\n      />\n    )\n  }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}