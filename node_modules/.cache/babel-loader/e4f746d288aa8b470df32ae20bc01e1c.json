{"ast":null,"code":"import _defineProperty from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import articlesAPI from'../../Api/articlesAPI';import{Redirect}from'react-router-dom';import ArticleForm from'../Form/Article_form';var updateArticle=/*#__PURE__*/function(_Component){_inherits(updateArticle,_Component);var _super=_createSuper(updateArticle);function updateArticle(){var _this;_classCallCheck(this,updateArticle);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={errors:[],content:'',attachment:null,fileName:'',redirect:false,reqHeader:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleFileChange=function(e){_this.setState({attachment:e.target.files[0],fileName:e.target.files[0].name});};_this.handleSubmit=function(event){event.preventDefault();var data=new FormData();data.append(\"content\",_this.state.content);data.append(\"attachment\",_this.state.attachment);var queryString=window.location.href;var id=queryString.split('/update/')[1];console.log(id);articlesAPI.putArticle(id,data,_this.state.reqHeader).then(function(){console.log(\"Article mis à jour\");_this.setState({redirect:true});}).catch(function(err){return console.log(err);});};return _this;}_createClass(updateArticle,[{key:\"render\",value:function render(){if(!localStorage.getItem('token')){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}if(this.state.redirect){return/*#__PURE__*/React.createElement(Redirect,{to:\"/post\"});}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(ArticleForm,{Submit:this.handleSubmit,contentValue:this.state.content,contentChange:this.handleChange,attachmentChange:this.handleFileChange,fileName:this.state.fileName,buttonContent:\"Mettre \\xE0 jour\"}));}}]);return updateArticle;}(Component);export default updateArticle;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/Articles/updateArticle.js"],"names":["React","Component","Fragment","articlesAPI","Redirect","ArticleForm","updateArticle","state","errors","content","attachment","fileName","redirect","reqHeader","localStorage","getItem","handleChange","event","target","name","value","setState","handleFileChange","e","files","handleSubmit","preventDefault","data","FormData","append","queryString","window","location","href","id","split","console","log","putArticle","then","catch","err"],"mappings":"w1BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,sBAAxB,C,GAEMC,CAAAA,a,uVAEFC,K,CAAQ,CACJC,MAAM,CAAG,EADL,CAEJC,OAAO,CAAE,EAFL,CAGJC,UAAU,CAAE,IAHR,CAIJC,QAAQ,CAAE,EAJN,CAKJC,QAAQ,CAAE,KALN,CAMJC,SAAS,CAAE,CACP,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CADO,CANP,C,OAWRC,Y,CAAe,SAACC,KAAD,CAAW,mBACCA,KAAK,CAACC,MADP,CACdC,IADc,eACdA,IADc,CACRC,KADQ,eACRA,KADQ,CAEtB,MAAKC,QAAL,oBAAiBF,IAAjB,CAAwBC,KAAxB,GACH,C,OAEDE,gB,CAAmB,SAACC,CAAD,CAAO,CACtB,MAAKF,QAAL,CAAc,CAAEX,UAAU,CAAEa,CAAC,CAACL,MAAF,CAASM,KAAT,CAAe,CAAf,CAAd,CAAkCb,QAAQ,CAAEY,CAAC,CAACL,MAAF,CAASM,KAAT,CAAe,CAAf,EAAkBL,IAA9D,CAAd,EACH,C,OAEDM,Y,CAAe,SAACR,KAAD,CAAW,CACtBA,KAAK,CAACS,cAAN,GAEA,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAX,CACAD,IAAI,CAACE,MAAL,CAAY,SAAZ,CAAuB,MAAKtB,KAAL,CAAWE,OAAlC,EACAkB,IAAI,CAACE,MAAL,CAAY,YAAZ,CAA0B,MAAKtB,KAAL,CAAWG,UAArC,EAEA,GAAMoB,CAAAA,WAAW,CAAIC,MAAM,CAACC,QAAP,CAAgBC,IAArC,CACA,GAAIC,CAAAA,EAAE,CAAGJ,WAAW,CAACK,KAAZ,CAAkB,UAAlB,EAA8B,CAA9B,CAAT,CAEAC,OAAO,CAACC,GAAR,CAAYH,EAAZ,EAEA/B,WAAW,CAACmC,UAAZ,CAAuBJ,EAAvB,CAA2BP,IAA3B,CAAiC,MAAKpB,KAAL,CAAWM,SAA5C,EACK0B,IADL,CACU,UAAM,CACRH,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACA,MAAKhB,QAAL,CAAc,CAAET,QAAQ,CAAE,IAAZ,CAAd,EACH,CAJL,EAKK4B,KALL,CAKW,SAAAC,GAAG,QAAIL,CAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAJ,EALd,EAMH,C,gFAES,CAEN,GAAG,CAAC3B,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,CAAkC,CAC9B,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,GAAG,KAAKR,KAAL,CAAWK,QAAd,CAAuB,CACnB,mBAAQ,oBAAC,QAAD,EAAU,EAAE,CAAC,OAAb,EAAR,CACH,CAED,mBACI,oBAAC,QAAD,mBACI,oBAAC,WAAD,EACA,MAAM,CAAE,KAAKa,YADb,CAEA,YAAY,CAAE,KAAKlB,KAAL,CAAWE,OAFzB,CAGA,aAAa,CAAE,KAAKO,YAHpB,CAIA,gBAAgB,CAAE,KAAKM,gBAJvB,CAKA,QAAQ,CAAE,KAAKf,KAAL,CAAWI,QALrB,CAMA,aAAa,CAAC,kBANd,EADJ,CADJ,CAYH,C,2BAhEuBV,S,EAmE5B,cAAeK,CAAAA,aAAf","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport articlesAPI from '../../Api/articlesAPI'\nimport { Redirect } from 'react-router-dom'\nimport ArticleForm from '../Form/Article_form'\n\nclass updateArticle extends Component {\n\n    state = {\n        errors : [],\n        content: '',\n        attachment: null,\n        fileName: '',\n        redirect: false,\n        reqHeader: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n    }\n\n    handleChange = (event) => {\n        const { name, value} = event.target\n        this.setState({ [name]: value })\n    }\n\n    handleFileChange = (e) => {  \n        this.setState({ attachment: e.target.files[0] , fileName: e.target.files[0].name});\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        let data = new FormData();\n        data.append(\"content\", this.state.content);\n        data.append(\"attachment\", this.state.attachment);\n\n        const queryString =  window.location.href;\n        let id = queryString.split('/update/')[1]\n\n        console.log(id)\n\n        articlesAPI.putArticle(id, data, this.state.reqHeader)\n            .then(() => {\n                console.log(\"Article mis à jour\")\n                this.setState({ redirect: true })\n            })\n            .catch(err => console.log(err))\n    }\n\n    render () {\n\n        if(!localStorage.getItem('token')){\n            return <Redirect to='/' />\n        }\n\n        if(this.state.redirect){\n            return  <Redirect to='/post'/>\n        }\n\n        return (\n            <Fragment>\n                <ArticleForm \n                Submit={this.handleSubmit}\n                contentValue={this.state.content}\n                contentChange={this.handleChange}\n                attachmentChange={this.handleFileChange}\n                fileName={this.state.fileName}\n                buttonContent=\"Mettre à jour\"\n                /> \n            </Fragment>\n        )\n    }\n}\n\nexport default updateArticle"]},"metadata":{},"sourceType":"module"}