{"ast":null,"code":"import _defineProperty from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import articlesAPI from'../../Api/articlesAPI';import{Redirect}from'react-router-dom';import ArticleForm from'../Form/Article_form';var createArticle=/*#__PURE__*/function(_Component){_inherits(createArticle,_Component);var _super=_createSuper(createArticle);function createArticle(){var _this;_classCallCheck(this,createArticle);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={errors:[],content:'',attachment:null,fileName:\"\",redirect:false,reqHeader:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}};_this.handleSubmit=function(){var data=new FormData();data.append(\"content\",_this.state.content);data.append(\"attachment\",_this.state.attachment);articlesAPI.postArticles(data,_this.state.reqHeader).then(function(){console.log(\"Article ajouté\");_this.setState({redirect:true});}).catch(function(err){return console.log(err);});};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleFileChange=function(e){_this.setState({attachment:e.target.files[0],fileName:e.target.files[0].name});};return _this;}_createClass(createArticle,[{key:\"render\",value:function render(){if(!localStorage.getItem('token')){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}if(this.state.redirect){return/*#__PURE__*/React.createElement(Redirect,{to:\"/post\"});}return/*#__PURE__*/React.createElement(ArticleForm,{contentValue:this.state.content,contentChange:this.handleChange,attachmentChange:this.handleFileChange,fileName:this.state.fileName,Submit:this.handleSubmit,buttonContent:\"Publier\"});}}]);return createArticle;}(Component);export default createArticle;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/Articles/createArticle.js"],"names":["React","Component","articlesAPI","Redirect","ArticleForm","createArticle","state","errors","content","attachment","fileName","redirect","reqHeader","localStorage","getItem","handleSubmit","data","FormData","append","postArticles","then","console","log","setState","catch","err","handleChange","event","target","name","value","handleFileChange","e","files"],"mappings":"w1BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,sBAAxB,C,GAGMC,CAAAA,a,uVAEFC,K,CAAQ,CACJC,MAAM,CAAG,EADL,CAEJC,OAAO,CAAE,EAFL,CAGJC,UAAU,CAAE,IAHR,CAIJC,QAAQ,CAAE,EAJN,CAKJC,QAAQ,CAAE,KALN,CAMJC,SAAS,CAAE,CACP,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CADO,CANP,C,OAWRC,Y,CAAe,UAAM,CAEjB,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAX,CACAD,IAAI,CAACE,MAAL,CAAY,SAAZ,CAAuB,MAAKZ,KAAL,CAAWE,OAAlC,EACAQ,IAAI,CAACE,MAAL,CAAY,YAAZ,CAA0B,MAAKZ,KAAL,CAAWG,UAArC,EAEAP,WAAW,CAACiB,YAAZ,CAAyBH,IAAzB,CAA+B,MAAKV,KAAL,CAAWM,SAA1C,EACKQ,IADL,CACU,UAAM,CACRC,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACD,MAAKC,QAAL,CAAc,CAAEZ,QAAQ,CAAE,IAAZ,CAAd,EACF,CAJL,EAKKa,KALL,CAKW,SAAAC,GAAG,QAAIJ,CAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAAJ,EALd,EAMH,C,OAEDC,Y,CAAe,SAACC,KAAD,CAAW,mBACCA,KAAK,CAACC,MADP,CACdC,IADc,eACdA,IADc,CACRC,KADQ,eACRA,KADQ,CAEtB,MAAKP,QAAL,oBAAiBM,IAAjB,CAAwBC,KAAxB,GACH,C,OAEDC,gB,CAAmB,SAACC,CAAD,CAAO,CACtB,MAAKT,QAAL,CAAc,CAAEd,UAAU,CAAEuB,CAAC,CAACJ,MAAF,CAASK,KAAT,CAAe,CAAf,CAAd,CAAkCvB,QAAQ,CAAEsB,CAAC,CAACJ,MAAF,CAASK,KAAT,CAAe,CAAf,EAAkBJ,IAA9D,CAAd,EACH,C,gFAES,CAEN,GAAG,CAAChB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,CAAkC,CAC9B,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,GAAG,KAAKR,KAAL,CAAWK,QAAd,CAAuB,CACnB,mBAAQ,oBAAC,QAAD,EAAU,EAAE,CAAC,OAAb,EAAR,CACH,CAED,mBACG,oBAAC,WAAD,EACA,YAAY,CAAE,KAAKL,KAAL,CAAWE,OADzB,CAEA,aAAa,CAAE,KAAKkB,YAFpB,CAGA,gBAAgB,CAAE,KAAKK,gBAHvB,CAIA,QAAQ,CAAE,KAAKzB,KAAL,CAAWI,QAJrB,CAKA,MAAM,CAAE,KAAKK,YALb,CAMA,aAAa,CAAC,SANd,EADH,CAUH,C,2BAxDuBd,S,EA2D5B,cAAeI,CAAAA,aAAf","sourcesContent":["import React, { Component } from 'react'\nimport articlesAPI from '../../Api/articlesAPI'\nimport { Redirect } from 'react-router-dom'\nimport ArticleForm from '../Form/Article_form'\n\n\nclass createArticle extends Component {\n\n    state = {\n        errors : [],\n        content: '',\n        attachment: null,\n        fileName: \"\",\n        redirect: false,\n        reqHeader: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n    }\n\n    handleSubmit = () => {\n\n        let data = new FormData();\n        data.append(\"content\", this.state.content);\n        data.append(\"attachment\", this.state.attachment);\n\n        articlesAPI.postArticles(data, this.state.reqHeader)\n            .then(() => {\n                console.log(\"Article ajouté\")\n               this.setState({ redirect: true })\n            })\n            .catch(err => console.log(err))\n    }\n\n    handleChange = (event) => {\n        const { name, value} = event.target\n        this.setState({ [name]: value })\n    }\n\n    handleFileChange = (e) => {  \n        this.setState({ attachment: e.target.files[0] , fileName: e.target.files[0].name});\n    }\n\n    render () {\n\n        if(!localStorage.getItem('token')){\n            return <Redirect to='/' />\n        }\n\n        if(this.state.redirect){\n            return  <Redirect to='/post'/>\n        }\n\n        return (\n           <ArticleForm \n           contentValue={this.state.content}\n           contentChange={this.handleChange}\n           attachmentChange={this.handleFileChange}\n           fileName={this.state.fileName}\n           Submit={this.handleSubmit}\n           buttonContent=\"Publier\"\n           /> \n        )\n    }\n}\n\nexport default createArticle"]},"metadata":{},"sourceType":"module"}