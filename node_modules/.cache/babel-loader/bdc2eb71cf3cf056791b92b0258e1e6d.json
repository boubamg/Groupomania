{"ast":null,"code":"var _jsxFileName = \"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Profile.js\";\nimport React from \"react\";\nimport API from '../../Api/userAPI';\nimport { Redirect } from 'react-router-dom';\nimport ProfileComponent from './Profile/Profile';\nimport UpdateProfileForm from './updateProfile';\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      redirect: false,\n      reqHeader: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    };\n\n    this.handleDelete = () => {\n      API.deleteAccount(this.state.reqHeader).then(() => {\n        console.log(\"Account was deleted\");\n        localStorage.clear();\n        this.setState({\n          redirect: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    API.getProfile(this.state.reqHeader).then(user => {\n      this.setState({\n        user: user.data\n      });\n    }).catch(err => console.log(err));\n    console.log(this.state.user);\n    console.log(this.state.user.lastname);\n  }\n\n  render() {\n    const {\n      user,\n      redirect\n    } = this.state;\n\n    if (!localStorage.getItem('token')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 16\n        }\n      });\n    }\n\n    if (redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 16\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(ProfileComponent, {\n      profilePicture: user.profilePicture,\n      lastname: user.lastname,\n      firstname: user.firstname,\n      email: user.email,\n      biography: user.biography,\n      component: /*#__PURE__*/React.createElement(UpdateProfileForm, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 20\n        }\n      }),\n      handleDelete: this.handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Profile.js"],"names":["React","API","Redirect","ProfileComponent","UpdateProfileForm","Profile","Component","state","user","redirect","reqHeader","localStorage","getItem","handleDelete","deleteAccount","then","console","log","clear","setState","catch","err","componentDidMount","getProfile","data","lastname","render","profilePicture","firstname","email","biography"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,gBAAP,MAA6B,mBAA7B;AAEA,OAAOC,iBAAP,MAA8B,iBAA9B;;AAGA,MAAMC,OAAN,SAAsBL,KAAK,CAACM,SAA5B,CAAsC;AAAA;AAAA;AAAA,SAElCC,KAFkC,GAE1B;AACJC,MAAAA,IAAI,EAAE,EADF;AAEJC,MAAAA,QAAQ,EAAE,KAFN;AAGJC,MAAAA,SAAS,EAAE;AACT,yBAAkB,UAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AADhD;AAHP,KAF0B;;AAAA,SAwBpCC,YAxBoC,GAwBrB,MAAM;AACnBZ,MAAAA,GAAG,CAACa,aAAJ,CAAkB,KAAKP,KAAL,CAAWG,SAA7B,EACCK,IADD,CACM,MAAM;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAN,QAAAA,YAAY,CAACO,KAAb;AACA,aAAKC,QAAL,CAAc;AAACV,UAAAA,QAAQ,EAAE;AAAX,SAAd;AACH,OALD,EAMCW,KAND,CAMOC,GAAG,IAAI;AACVL,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACH,OARD;AASH,KAlCqC;AAAA;;AAUpCC,EAAAA,iBAAiB,GAAG;AAElBrB,IAAAA,GAAG,CAACsB,UAAJ,CAAe,KAAKhB,KAAL,CAAWG,SAA1B,EACCK,IADD,CACMP,IAAI,IAAI;AACV,WAAKW,QAAL,CAAc;AACVX,QAAAA,IAAI,EAAEA,IAAI,CAACgB;AADD,OAAd;AAGH,KALD,EAMCJ,KAND,CAMOC,GAAG,IAAIL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CANd;AAQAL,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWC,IAAvB;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWC,IAAX,CAAgBiB,QAA5B;AACD;;AAcDC,EAAAA,MAAM,GAAG;AAEP,UAAM;AAAClB,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAmB,KAAKF,KAA9B;;AAEA,QAAG,CAACI,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAkC;AAC9B,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAED,QAAGH,QAAH,EAAY;AACR,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAED,wBACE,oBAAC,gBAAD;AACE,MAAA,cAAc,EAAED,IAAI,CAACmB,cADvB;AAEE,MAAA,QAAQ,EAAEnB,IAAI,CAACiB,QAFjB;AAGE,MAAA,SAAS,EAAEjB,IAAI,CAACoB,SAHlB;AAIE,MAAA,KAAK,EAAEpB,IAAI,CAACqB,KAJd;AAKE,MAAA,SAAS,EAAErB,IAAI,CAACsB,SALlB;AAME,MAAA,SAAS,eAAE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANb;AAOE,MAAA,YAAY,EAAE,KAAKjB,YAPrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAWD;;AA3DmC;;AA8DtC,eAAeR,OAAf","sourcesContent":["import React from \"react\";\nimport API from '../../Api/userAPI'\nimport { Redirect } from 'react-router-dom'\nimport ProfileComponent from './Profile/Profile'\n\nimport UpdateProfileForm from './updateProfile'\n\n\nclass Profile extends React.Component {\n\n    state = {\n        user: {},\n        redirect: false,\n        reqHeader: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }\n\n  componentDidMount() {\n  \n    API.getProfile(this.state.reqHeader)\n    .then(user => {\n        this.setState({\n            user: user.data\n        })\n    })\n    .catch(err => console.log(err))\n\n    console.log(this.state.user)\n    console.log(this.state.user.lastname)\n  }\n\n  handleDelete = () => {\n    API.deleteAccount(this.state.reqHeader)\n    .then(() => {\n        console.log(\"Account was deleted\")\n        localStorage.clear()\n        this.setState({redirect: true})\n    })\n    .catch(err => {\n        console.log(err)\n    })\n}\n\n  render() {\n\n    const {user, redirect} = this.state\n\n    if(!localStorage.getItem('token')){\n        return <Redirect to='/' />\n    }\n\n    if(redirect){\n        return <Redirect to='/' />\n    }\n\n    return ( \n      <ProfileComponent\n        profilePicture={user.profilePicture}\n        lastname={user.lastname} \n        firstname={user.firstname}\n        email={user.email}\n        biography={user.biography}\n        component={<UpdateProfileForm />}\n        handleDelete={this.handleDelete}\n      />\n    )\n  }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}