{"ast":null,"code":"import _classCallCheck from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import API from'../../Api/userAPI';import{Redirect}from'react-router-dom';import ProfileComponent from'./Profile/Profile';import UpdateProfileForm from'./updateProfile';var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(){var _this;_classCallCheck(this,Profile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:{},redirect:false,reqHeader:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}};_this.handleDelete=function(){API.deleteAccount(_this.state.reqHeader).then(function(){console.log(\"Account was deleted\");localStorage.clear();_this.setState({redirect:true});}).catch(function(err){console.log(err);});};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;API.getProfile(this.state.reqHeader).then(function(user){_this2.setState({user:user.data});}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){var _this$state=this.state,user=_this$state.user,redirect=_this$state.redirect;if(!localStorage.getItem('token')){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}if(redirect){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(ProfileComponent,{profilePicture:user.profilePicture,lastname:user.lastname,firstname:user.firstname,email:user.email,biography:user.biography,component:/*#__PURE__*/React.createElement(UpdateProfileForm,null),handleDelete:this.handleDelete});}}]);return Profile;}(React.Component);export default Profile;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Profile.js"],"names":["React","API","Redirect","ProfileComponent","UpdateProfileForm","Profile","state","user","redirect","reqHeader","localStorage","getItem","handleDelete","deleteAccount","then","console","log","clear","setState","catch","err","getProfile","data","profilePicture","lastname","firstname","email","biography","Component"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,mBAA7B,CAEA,MAAOC,CAAAA,iBAAP,KAA8B,iBAA9B,C,GAGMC,CAAAA,O,2UAEFC,K,CAAQ,CACJC,IAAI,CAAE,EADF,CAEJC,QAAQ,CAAE,KAFN,CAGJC,SAAS,CAAE,CACT,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CADS,CAHP,C,OAmBVC,Y,CAAe,UAAM,CACnBX,GAAG,CAACY,aAAJ,CAAkB,MAAKP,KAAL,CAAWG,SAA7B,EACCK,IADD,CACM,UAAM,CACRC,OAAO,CAACC,GAAR,CAAY,qBAAZ,EACAN,YAAY,CAACO,KAAb,GACA,MAAKC,QAAL,CAAc,CAACV,QAAQ,CAAE,IAAX,CAAd,EACH,CALD,EAMCW,KAND,CAMO,SAAAC,GAAG,CAAI,CACVL,OAAO,CAACC,GAAR,CAAYI,GAAZ,EACH,CARD,EASH,C,gGArBqB,iBAElBnB,GAAG,CAACoB,UAAJ,CAAe,KAAKf,KAAL,CAAWG,SAA1B,EACCK,IADD,CACM,SAAAP,IAAI,CAAI,CACV,MAAI,CAACW,QAAL,CAAc,CACVX,IAAI,CAAEA,IAAI,CAACe,IADD,CAAd,EAGH,CALD,EAMCH,KAND,CAMO,SAAAC,GAAG,QAAIL,CAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAJ,EANV,EAOD,C,uCAcQ,iBAEkB,KAAKd,KAFvB,CAEAC,IAFA,aAEAA,IAFA,CAEMC,QAFN,aAEMA,QAFN,CAIP,GAAG,CAACE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,CAAkC,CAC9B,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,GAAGH,QAAH,CAAY,CACR,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,mBACE,oBAAC,gBAAD,EACE,cAAc,CAAED,IAAI,CAACgB,cADvB,CAEE,QAAQ,CAAEhB,IAAI,CAACiB,QAFjB,CAGE,SAAS,CAAEjB,IAAI,CAACkB,SAHlB,CAIE,KAAK,CAAElB,IAAI,CAACmB,KAJd,CAKE,SAAS,CAAEnB,IAAI,CAACoB,SALlB,CAME,SAAS,cAAE,oBAAC,iBAAD,MANb,CAOE,YAAY,CAAE,KAAKf,YAPrB,EADF,CAWD,C,qBAxDmBZ,KAAK,CAAC4B,S,EA2D5B,cAAevB,CAAAA,OAAf","sourcesContent":["import React from \"react\";\nimport API from '../../Api/userAPI'\nimport { Redirect } from 'react-router-dom'\nimport ProfileComponent from './Profile/Profile'\n\nimport UpdateProfileForm from './updateProfile'\n\n\nclass Profile extends React.Component {\n\n    state = {\n        user: {},\n        redirect: false,\n        reqHeader: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }\n\n  componentDidMount() {\n  \n    API.getProfile(this.state.reqHeader)\n    .then(user => {\n        this.setState({\n            user: user.data\n        })\n    })\n    .catch(err => console.log(err))\n  }\n\n  handleDelete = () => {\n    API.deleteAccount(this.state.reqHeader)\n    .then(() => {\n        console.log(\"Account was deleted\")\n        localStorage.clear()\n        this.setState({redirect: true})\n    })\n    .catch(err => {\n        console.log(err)\n    })\n}\n\n  render() {\n\n    const {user, redirect} = this.state\n\n    if(!localStorage.getItem('token')){\n        return <Redirect to='/' />\n    }\n\n    if(redirect){\n        return <Redirect to='/' />\n    }\n\n    return ( \n      <ProfileComponent\n        profilePicture={user.profilePicture}\n        lastname={user.lastname} \n        firstname={user.firstname}\n        email={user.email}\n        biography={user.biography}\n        component={<UpdateProfileForm />}\n        handleDelete={this.handleDelete}\n      />\n    )\n  }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}