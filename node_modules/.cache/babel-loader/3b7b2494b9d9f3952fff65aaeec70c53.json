{"ast":null,"code":"var _jsxFileName = \"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Profile.js\";\nimport React from \"react\";\nimport API from '../../Api/userAPI';\nimport { Redirect } from 'react-router-dom';\nimport ProfileComponent from './Profile/Profile';\nimport UpdateProfileForm from './updateProfile';\nconst headers = {\n  'Authorization': `Bearer ${localStorage.getItem('token')}`\n};\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: [],\n      redirect: false\n    };\n\n    this.handleDelete = () => {\n      API.deleteAccount(headers).then(() => {\n        console.log(\"Account was deleted\");\n        localStorage.clear();\n        this.setState({\n          redirect: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    // document.documentElement.scrollTop = 0;\n    // document.scrollingElement.scrollTop = 0;\n    // this.refs.main.scrollTop = 0;\n    API.getProfile(headers).then(user => {\n      this.setState({\n        user: user.data\n      });\n      user.forEach(element => {\n        console.log(element);\n      });\n      console.log(this.state.user);\n      console.log(this.state.userlastname);\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const {\n      user,\n      redirect\n    } = this.state;\n\n    if (!localStorage.getItem('token')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 16\n        }\n      });\n    }\n\n    if (redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 16\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(ProfileComponent, {\n      profilePicture: user.profilePicture,\n      lastname: user.lastname,\n      firstname: user.firstname,\n      email: user.email,\n      biography: user.biography,\n      component: /*#__PURE__*/React.createElement(UpdateProfileForm, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 20\n        }\n      }),\n      handleDelete: this.handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Profile.js"],"names":["React","API","Redirect","ProfileComponent","UpdateProfileForm","headers","localStorage","getItem","Profile","Component","state","user","redirect","handleDelete","deleteAccount","then","console","log","clear","setState","catch","err","componentDidMount","getProfile","data","forEach","element","userlastname","render","profilePicture","lastname","firstname","email","biography"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,gBAAP,MAA6B,mBAA7B;AAEA,OAAOC,iBAAP,MAA8B,iBAA9B;AAEA,MAAMC,OAAO,GAAG;AACZ,mBAAkB,UAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAD7C,CAAhB;;AAIA,MAAMC,OAAN,SAAsBR,KAAK,CAACS,SAA5B,CAAsC;AAAA;AAAA;AAAA,SAElCC,KAFkC,GAE1B;AACJC,MAAAA,IAAI,EAAE,EADF;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAF0B;;AAAA,SA4BpCC,YA5BoC,GA4BrB,MAAM;AACnBZ,MAAAA,GAAG,CAACa,aAAJ,CAAkBT,OAAlB,EACCU,IADD,CACM,MAAM;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAX,QAAAA,YAAY,CAACY,KAAb;AACA,aAAKC,QAAL,CAAc;AAACP,UAAAA,QAAQ,EAAE;AAAX,SAAd;AACH,OALD,EAMCQ,KAND,CAMOC,GAAG,IAAI;AACVL,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACH,OARD;AASH,KAtCqC;AAAA;;AAOpCC,EAAAA,iBAAiB,GAAG;AAClB;AACA;AACA;AAEArB,IAAAA,GAAG,CAACsB,UAAJ,CAAelB,OAAf,EACCU,IADD,CACMJ,IAAI,IAAI;AACV,WAAKQ,QAAL,CAAc;AACVR,QAAAA,IAAI,EAAEA,IAAI,CAACa;AADD,OAAd;AAIAb,MAAAA,IAAI,CAACc,OAAL,CAAaC,OAAO,IAAI;AACtBV,QAAAA,OAAO,CAACC,GAAR,CAAYS,OAAZ;AACD,OAFD;AAIAV,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKP,KAAL,CAAWC,IAAvB;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKP,KAAL,CAAWiB,YAAvB;AACH,KAZD,EAaCP,KAbD,CAaOC,GAAG,IAAIL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAbd;AAcD;;AAcDO,EAAAA,MAAM,GAAG;AAEP,UAAM;AAACjB,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAmB,KAAKF,KAA9B;;AAEA,QAAG,CAACJ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAkC;AAC9B,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAED,QAAGK,QAAH,EAAY;AACR,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAED,wBACE,oBAAC,gBAAD;AACE,MAAA,cAAc,EAAED,IAAI,CAACkB,cADvB;AAEE,MAAA,QAAQ,EAAElB,IAAI,CAACmB,QAFjB;AAGE,MAAA,SAAS,EAAEnB,IAAI,CAACoB,SAHlB;AAIE,MAAA,KAAK,EAAEpB,IAAI,CAACqB,KAJd;AAKE,MAAA,SAAS,EAAErB,IAAI,CAACsB,SALlB;AAME,MAAA,SAAS,eAAE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANb;AAOE,MAAA,YAAY,EAAE,KAAKpB,YAPrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAWD;;AA/DmC;;AAkEtC,eAAeL,OAAf","sourcesContent":["import React from \"react\";\nimport API from '../../Api/userAPI'\nimport { Redirect } from 'react-router-dom'\nimport ProfileComponent from './Profile/Profile'\n\nimport UpdateProfileForm from './updateProfile'\n\nconst headers = {\n    'Authorization': `Bearer ${localStorage.getItem('token')}`\n};\n\nclass Profile extends React.Component {\n\n    state = {\n        user: [],\n        redirect: false\n    }\n\n  componentDidMount() {\n    // document.documentElement.scrollTop = 0;\n    // document.scrollingElement.scrollTop = 0;\n    // this.refs.main.scrollTop = 0;\n    \n    API.getProfile(headers)\n    .then(user => {\n        this.setState({\n            user: user.data\n        })\n\n        user.forEach(element => {\n          console.log(element)\n        })\n\n        console.log(this.state.user)\n        console.log(this.state.userlastname)\n    })\n    .catch(err => console.log(err))\n  }\n\n  handleDelete = () => {\n    API.deleteAccount(headers)\n    .then(() => {\n        console.log(\"Account was deleted\")\n        localStorage.clear()\n        this.setState({redirect: true})\n    })\n    .catch(err => {\n        console.log(err)\n    })\n}\n\n  render() {\n\n    const {user, redirect} = this.state\n\n    if(!localStorage.getItem('token')){\n        return <Redirect to='/' />\n    }\n\n    if(redirect){\n        return <Redirect to='/' />\n    }\n\n    return ( \n      <ProfileComponent\n        profilePicture={user.profilePicture}\n        lastname={user.lastname} \n        firstname={user.firstname}\n        email={user.email}\n        biography={user.biography}\n        component={<UpdateProfileForm />}\n        handleDelete={this.handleDelete}\n      />\n    )\n  }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}