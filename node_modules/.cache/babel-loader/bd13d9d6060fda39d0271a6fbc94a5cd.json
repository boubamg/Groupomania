{"ast":null,"code":"import _defineProperty from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import{Redirect}from'react-router-dom';import API from'../../Api/userAPI';import UpdateProfileForm from'../Form/updateProfile_form';var updateProfile=/*#__PURE__*/function(_Component){_inherits(updateProfile,_Component);var _super=_createSuper(updateProfile);function updateProfile(){var _this;_classCallCheck(this,updateProfile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={biography:\"\",profilePicture:null,fileName:\"\",reqHeader:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}};_this.handleChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(e){var data=new FormData();data.append(\"biography\",_this.state.biography);data.append(\"profilePicture\",_this.state.profilePicture);API.putProfile(data,_this.state.reqHeader).then().catch(function(err){console.log(err);});};_this.profilePictureChange=function(e){_this.setState({profilePicture:e.target.files[0],fileName:e.target.files[0].name});};return _this;}_createClass(updateProfile,[{key:\"render\",value:function render(){var _this$state=this.state,biography=_this$state.biography,fileName=_this$state.fileName;if(!localStorage.getItem('token')){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(UpdateProfileForm,{biographyValue:biography,biographyChange:this.handleChange,profilePictureChange:this.profilePictureChange,Submit:this.handleSubmit,fileName:fileName}));}}]);return updateProfile;}(Component);export default updateProfile;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/updateProfile.js"],"names":["React","Component","Fragment","Redirect","API","UpdateProfileForm","updateProfile","state","biography","profilePicture","fileName","reqHeader","localStorage","getItem","handleChange","e","target","name","value","setState","handleSubmit","data","FormData","append","putProfile","then","catch","err","console","log","profilePictureChange","files"],"mappings":"w1BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,4BAA9B,C,GAGMC,CAAAA,a,uVAEFC,K,CAAQ,CACJC,SAAS,CAAE,EADP,CAEJC,cAAc,CAAE,IAFZ,CAGJC,QAAQ,CAAE,EAHN,CAIJC,SAAS,CAAE,CACP,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CADO,CAJP,C,OASRC,Y,CAAe,SAACC,CAAD,CAAO,eACEA,CAAC,CAACC,MADJ,CACbC,IADa,WACbA,IADa,CACPC,KADO,WACPA,KADO,CAElB,MAAKC,QAAL,oBAAiBF,IAAjB,CAAwBC,KAAxB,GACH,C,OAEDE,Y,CAAe,SAACL,CAAD,CAAO,CAGlB,GAAIM,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAX,CACAD,IAAI,CAACE,MAAL,CAAY,WAAZ,CAAyB,MAAKhB,KAAL,CAAWC,SAApC,EACAa,IAAI,CAACE,MAAL,CAAY,gBAAZ,CAA8B,MAAKhB,KAAL,CAAWE,cAAzC,EAEAL,GAAG,CAACoB,UAAJ,CAAeH,IAAf,CAAqB,MAAKd,KAAL,CAAWI,SAAhC,EACCc,IADD,GAECC,KAFD,CAEO,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAJD,EAKH,C,OAEDG,oB,CAAuB,SAACf,CAAD,CAAO,CAC1B,MAAKI,QAAL,CAAc,CAAEV,cAAc,CAAEM,CAAC,CAACC,MAAF,CAASe,KAAT,CAAe,CAAf,CAAlB,CAAqCrB,QAAQ,CAAEK,CAAC,CAACC,MAAF,CAASe,KAAT,CAAe,CAAf,EAAkBd,IAAjE,CAAd,EAGH,C,gFAES,iBAEwB,KAAKV,KAF7B,CAEAC,SAFA,aAEAA,SAFA,CAEWE,QAFX,aAEWA,QAFX,CAIN,GAAG,CAACE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,CAAkC,CAC9B,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,mBACI,oBAAC,QAAD,mBACI,oBAAC,iBAAD,EACA,cAAc,CAAEL,SADhB,CAEA,eAAe,CAAE,KAAKM,YAFtB,CAGA,oBAAoB,CAAE,KAAKgB,oBAH3B,CAIA,MAAM,CAAE,KAAKV,YAJb,CAKA,QAAQ,CAAEV,QALV,EADJ,CADJ,CAaH,C,2BAzDuBT,S,EA4D5B,cAAeK,CAAAA,aAAf","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport API from '../../Api/userAPI'\nimport UpdateProfileForm from '../Form/updateProfile_form'\n\n\nclass updateProfile extends Component {\n\n    state = {\n        biography: \"\",\n        profilePicture: null,\n        fileName: \"\",\n        reqHeader: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n    }\n\n    handleChange = (e) => {\n        let {name, value} = e.target\n        this.setState({ [name]: value })\n    }\n\n    handleSubmit = (e) => {\n        \n\n        let data = new FormData()\n        data.append(\"biography\", this.state.biography)\n        data.append(\"profilePicture\", this.state.profilePicture)\n\n        API.putProfile(data, this.state.reqHeader)\n        .then()\n        .catch(err => {\n            console.log(err)\n        })\n    }\n\n    profilePictureChange = (e) => {\n        this.setState({ profilePicture: e.target.files[0], fileName: e.target.files[0].name})\n\n        \n    }\n\n    render () {\n\n        let { biography, fileName } = this.state\n\n        if(!localStorage.getItem('token')){\n            return <Redirect to='/' />\n        }\n\n        return (\n            <Fragment>\n                <UpdateProfileForm\n                biographyValue={biography}\n                biographyChange={this.handleChange}\n                profilePictureChange={this.profilePictureChange} \n                Submit={this.handleSubmit}\n                fileName={fileName}\n                />\n                \n            </Fragment>\n            \n        )\n    }\n}\n\nexport default updateProfile"]},"metadata":{},"sourceType":"module"}