{"ast":null,"code":"import _defineProperty from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';//import { Form, FormGroup, Label, Button, Input, Row, Container, Col } from 'reactstrap';\nimport userAPI from'../../../Api/userAPI';import{Redirect}from'react-router-dom';import SignUp from'../../Form/Signup_form';import{Fragment}from'react';//import './Connexion.css'\nvar Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);var _super=_createSuper(Signup);function Signup(){var _this;_classCallCheck(this,Signup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// init empty data\nfirstname:\"\",lastname:\"\",email:\"\",password:\"\",confirmPassword:\"\",redirection:false,formIsValid:true,errors:{}};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.verification=function(){var _this$state=_this.state,firstname=_this$state.firstname,lastname=_this$state.lastname,email=_this$state.email,password=_this$state.password,confirmPassword=_this$state.confirmPassword,errors=_this$state.errors,formIsValid=_this$state.formIsValid;if(!/^[A-Za-z]{2,}$/.test(firstname)){_this.setState({formIsValid:false});errors[\"firstname\"]=\"Le prénom est incorrect\";}if(!/^[A-Za-z]{2,}$/.test(lastname)){_this.setState({formIsValid:false});errors[\"lastname\"]=\"Le nom est incorrect\";}if(!/^[A-Za-z0-9._-]+@[A-Za-z0-9._-]+\\.[A-Za-z]{2,}$/.test(email)){_this.setState({formIsValid:false});errors[\"email\"]=\"L'email est incorrect\";}if(!password||password.length<8){_this.setState({formIsValid:false});errors[\"password\"]=\"Le mot de passe doit contenir au moins 8 caractères\";}if(confirmPassword!==password){_this.setState({formIsValid:false});errors[\"confirmPassword\"]=\"La confirmation du mot de passe est incorrect\";}_this.setState({errors:errors});return formIsValid;};_this.handleSubmit=function(event){event.preventDefault();var _this$state2=_this.state,firstname=_this$state2.firstname,lastname=_this$state2.lastname,email=_this$state2.email,password=_this$state2.password;if(_this.verification()){userAPI.signup(firstname,lastname,email,password).then(function(){_this.setState({redirection:true});}).catch(function(error){console.log(error);});}else{console.log(\"Form has errors\");}_this.setState({formIsValid:true});};return _this;}_createClass(Signup,[{key:\"render\",value:function render(){var _this$state3=this.state,firstname=_this$state3.firstname,lastname=_this$state3.lastname,email=_this$state3.email,password=_this$state3.password,confirmPassword=_this$state3.confirmPassword,redirection=_this$state3.redirection,errors=_this$state3.errors;if(localStorage.getItem('token')){return/*#__PURE__*/React.createElement(Redirect,{to:\"/post\"});}if(redirection){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}var errorArray=Object.keys(errors).map(function(id){return/*#__PURE__*/React.createElement(\"p\",{className:\"errors\",key:id},errors[id]);});return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(SignUp,{firstnameValue:firstname,lastnameValue:lastname,email:email,passwordValue:password,cpasswordValue:confirmPassword,Change:this.handleChange,Submit:this.handleSubmit,errors:errorArray}));}}]);return Signup;}(Component);export default Signup;","map":{"version":3,"sources":["/Users/maiga/Desktop/DWJ OPC/P7_Maiga_Boubacar/frontend/src/components/User/Connexion/Signup.js"],"names":["React","Component","userAPI","Redirect","SignUp","Fragment","Signup","state","firstname","lastname","email","password","confirmPassword","redirection","formIsValid","errors","handleChange","event","target","name","value","setState","verification","test","length","handleSubmit","preventDefault","signup","then","catch","error","console","log","localStorage","getItem","errorArray","Object","keys","map","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n//import { Form, FormGroup, Label, Button, Input, Row, Container, Col } from 'reactstrap';\nimport userAPI from '../../../Api/userAPI'\nimport {Redirect} from 'react-router-dom'\nimport SignUp from '../../Form/Signup_form'\nimport { Fragment } from 'react'\n//import './Connexion.css'\n\n\nclass Signup extends Component {\n\n    state = {\n        // init empty data\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        redirection: false,\n        formIsValid: true,\n        errors: {}\n    }\n\n    handleChange = (event) => {\n        let { name, value} = event.target\n        this.setState({ [name] : value })\n    }\n\n    verification = () => {\n        const { firstname, lastname, email, password, confirmPassword, errors, formIsValid} = this.state\n\n        if(!/^[A-Za-z]{2,}$/.test(firstname)){\n            this.setState({formIsValid: false})\n            errors[\"firstname\"] = \"Le prénom est incorrect\";\n        }\n        if(!/^[A-Za-z]{2,}$/.test(lastname)){\n            this.setState({formIsValid: false})\n            errors[\"lastname\"] = \"Le nom est incorrect\";\n        }\n        if(!/^[A-Za-z0-9._-]+@[A-Za-z0-9._-]+\\.[A-Za-z]{2,}$/.test(email)){\n            this.setState({formIsValid: false})\n            errors[\"email\"] = \"L'email est incorrect\";\n        }\n        if(!password || password.length < 8 ){\n            this.setState({formIsValid: false})\n            errors[\"password\"] = \"Le mot de passe doit contenir au moins 8 caractères\";\n        }\n        if(confirmPassword !== password) {\n            this.setState({formIsValid: false})\n            errors[\"confirmPassword\"] = \"La confirmation du mot de passe est incorrect\"\n        }\n\n        this.setState({errors})\n        return formIsValid;\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n\n        const { firstname, lastname, email, password} = this.state\n\n        if(this.verification()) {\n            userAPI.signup(firstname, lastname ,email, password)\n            .then(() => {\n                this.setState({redirection: true})\n            })\n            .catch(error => {\n                console.log(error);\n            });\n        } else {\n            console.log(\"Form has errors\")\n        }\n\n        this.setState({formIsValid: true})\n       \n    }\n\n    render () {\n\n        const {firstname, lastname, email, password, confirmPassword, redirection, errors} = this.state;\n\n        if(localStorage.getItem('token')){\n            return <Redirect to='/post' />\n        }\n        \n        if(redirection){\n            return <Redirect to='/'/>;\n        }\n\n        let errorArray = Object.keys(errors)\n        .map(id => (\n            <p className=\"errors\" key={id}>\n                {errors[id]}\n            </p>\n        ))\n\n        return (\n\n            <Fragment>\n                <SignUp\n                firstnameValue={firstname}\n                lastnameValue={lastname}\n                email={email}\n                passwordValue={password}\n                cpasswordValue={confirmPassword}\n                Change={this.handleChange}\n                Submit={this.handleSubmit}\n                errors={errorArray}\n                />\n            </Fragment>\n            \n\n        )\n    }\n}\n\nexport default Signup"]},"metadata":{},"sourceType":"module"}